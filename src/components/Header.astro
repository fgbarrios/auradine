---
import Link from "./Link.astro";
---

<div class="relative">
  <header
    class="bg-transparent text-white flex align-center z-50 absolute w-full h-full top-0 left-0"
  >
    <div
      class="container w-[90vw] max-w-[1500px] mx-auto flex justify-between items-center py-4 pt-8 md:pt-16"
    >
      <a href="/homepage/" class="logo">
        <div class="logo-container flex items-center gap-2">
          <img src="/favicon.svg" class="h-8 | main" />
          <span class="sr-only">Auradine</span>
          <img src="/auradine.svg" alt="" class="h-5 | letters" />
        </div>
      </a>
      <nav>
        <button
          class="hamburger flex flex-col justify-between w-6 h-5 md:hidden"
          aria-label="Toggle menu"
          aria-expanded="false"
          id="hamburger"
        >
          <span class="bar h-0.5 w-full bg-white transition-all duration-300"
          ></span>
          <span class="bar h-0.5 w-full bg-white transition-all duration-300"
          ></span>
          <span class="bar h-0.5 w-full bg-white transition-all duration-300"
          ></span>
        </button>

        <ul
          class="hidden absolute bg-[#080C20] md:bg-transparent top-[4rem] p-6 md:p-0 left-0 w-full h-auto md:h-auto md:w-auto md:static md:flex flex-col md:flex-row md:items-center gap-4 md:gap-8"
          id="nav-menu"
        >
          <li class="flex">
            <a
              class="gradient-overline text-white opacity-100 md:opacity-80 hover:opacity-100 py-2 mb-4 border-b-1 border-[#ffffff36] w-full md:border-0 md:p-0 md:m-0"
              href="/about/">About</a
            >
          </li>
          <li class="relative group flex flex-col md:flex-row">
            <a
              href="#"
              class="has-children gradient-overline text-white opacity-100 md:opacity-80 hover:opacity-100 relative py-2 mb-4 border-b border-[#ffffff36] w-full md:border-0 md:p-0 md:m-0"
            >
              Solutions
            </a>
            <ul
              class="children md:absolute bg-transparent md:border md:border-[#ffffff36] rounded-[6px] md:top-[2rem] md:left-1/2 md:transform md:-translate-x-1/2 w-full md:w-auto h-auto flex-col flex md:hidden group-hover:flex"
            >
              <div
                class="hidden md:block overlay absolute inset-0 w-full h-full rounded-[6px] z-0"
                style="backdrop-filter: blur(10px);"
              >
              </div>
              <li class="relative flex flex-col md:flex-row z-1">
                <a
                  href="/products/"
                  class="group/child flex items-center gap-2 font-base | w-fit p-4 pr-8 rounded-full h-fit font-normal text-[14px] leading-[19.6px] tracking-[0] text-center align-middle hover:opacity-100"
                  ><span class="group-hover/child:opacity-100">Products</span>
                  <span
                    ><svg
                      class="hidden md:block group-hover/child:translate-x-2 transition-all duration-300"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      ><path
                        fill="#fff"
                        fill-rule="evenodd"
                        d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"
                      ></path></svg
                    ></span
                  ></a
                >
              </li>
              <li class="relative flex flex-col md:flex-row z-1">
                <a
                  href="/economics/"
                  class="group/child flex items-center gap-2 font-base | w-fit p-4 pr-8 rounded-full h-fit font-normal text-[14px] leading-[19.6px] tracking-[0] text-center align-middle hover:opacity-100"
                  ><span class="group-hover/child:opacity-100">Economics</span>
                  <span
                    ><svg
                      class="hidden md:block group-hover/child:translate-x-2 transition-all duration-300"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      ><path
                        fill="#fff"
                        fill-rule="evenodd"
                        d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"
                      ></path></svg
                    ></span
                  ></a
                >
              </li>
            </ul>
          </li>

          <li class="flex">
            <a
              class="gradient-overline text-white opacity-100 md:opacity-80 hover:opacity-100 py-2 mb-4 border-b-1 border-[#ffffff36] w-full md:border-0 md:p-0 md:m-0"
              href="/resources/">Resources</a
            >
          </li>
          <li class="flex">
            <a
              class="gradient-overline text-white opacity-100 md:opacity-80 hover:opacity-100 py-2 mb-4 border-b-1 border-[#ffffff36] w-full md:border-0 md:p-0 md:m-0"
              href="/careers/">Careers</a
            >
          </li>
          <li class="flex">
            <a
              class="gradient-overline text-white opacity-100 md:opacity-80 hover:opacity-100 py-2 mb-4 border-b-1 border-[#ffffff36] w-full md:border-0 md:p-0 md:m-0"
              href="/support/">Support</a
            >
          </li>
          <div class="block md:hidden mt-4 mb-8">
            <Link href="/" text="Contact" />
          </div>
        </ul>
      </nav>
      <div
        class="hidden md:block overflow-x-hidden"
        style="border-radius: 32px;"
      >
        <Link href="/" text="Contact" />
      </div>
    </div>
  </header>
</div>
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const hamburger = document.getElementById("hamburger");
    const main = document.querySelector("main");
    const navMenu = document.getElementById("nav-menu");

    hamburger.addEventListener("click", () => {
      navMenu.classList.toggle("hidden");
      hamburger.classList.toggle("open");
      main.classList.toggle("open-menu");

      //if menu is being opened, disable scroll
      /*
      if (hamburger.classList.contains("open")) {
        lenis.stop();
      } else {
        lenis.play();
      }
        */

      //add aria expended
      const isExpanded = hamburger.getAttribute("aria-expanded") == "true";
      hamburger.setAttribute("aria-expanded", !isExpanded);
    });

    //if click on the body, close the menu (if open)
    main.addEventListener("click", () => {
      if (hamburger.classList.contains("open")) {
        navMenu.classList.add("hidden");
        hamburger.classList.remove("open");
        main.classList.remove("open-menu");
        hamburger.setAttribute("aria-expanded", false);
      }
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll("#nav-menu a");

    navLinks.forEach((link) => {
      if (link.getAttribute("href") === currentPath) {
        link.classList.add("current");
      }
    });
  });
</script>

<style>
  .hamburger.open .bar:nth-child(1) {
    transform: rotate(45deg) translateY(13px);
  }

  .hamburger.open .bar:nth-child(2) {
    opacity: 0;
  }

  .hamburger.open .bar:nth-child(3) {
    transform: rotate(-45deg) translateY(-13px);
  }

  #nav-menu li:hover a.has-children {
    opacity: 1 !important;
  }
  .children::before {
    /* this is a bridge between the children and the parent */
    content: "";
    position: absolute;
    width: 100%;
    height: 3rem;
    top: -2rem;
    left: 0;
  }
</style>
